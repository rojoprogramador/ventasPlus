Warning: TTY mode is not supported on Windows platform.
PHPUnit 9.6.23 by Sebastian Bergmann and contributors.

Basic (Tests\Unit\Basic)
 ✔ Basic example

Cliente Controller (Tests\Feature\ClienteController)
 ✔ Puede crear cliente rapido
 ✔ No permite documento duplicado
 ✔ No permite email duplicado
 ✔ Puede buscar clientes
 ✔ Puede actualizar cliente
 ✔ Puede obtener detalles de cliente

Cliente Simple (Tests\Feature\ClienteSimple)
 ✔ Un usuario autenticado puede ver la lista de clientes
 ✔ Verifica estructura basica de base de datos

Database Structure (Tests\Feature\DatabaseStructure)
 ✔ Productos table has required columns
 ✔ Clientes table has required columns
 ✔ Ventas table has required columns
 ✔ Roles table has required columns
 ✔ Permisos table has required columns
 ✔ Foreign keys are correctly defined

Exportacion Controller (Tests\Feature\ExportacionController)
 ✘ Usuario puede ver pagina exportacion si tiene permiso
   │
   │ Expected response status code [200] but received 500.
   │ Failed asserting that 200 is identical to 500.
   │
   │ The following exception occurred during the last request:
   │
   │ Mockery\Exception\BadMethodCallException: Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified in D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code:973
   │ Stack trace:
   │ #0 D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code(1079): Mockery_3_App_Http_Controllers_ExportacionController->_mockery_handleMethodCall('getMiddleware', Array)
   │ #1 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(77): Mockery_3_App_Http_Controllers_ExportacionController->getMiddleware()
   │ #2 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1099): Illuminate\Routing\ControllerDispatcher->getMiddleware(Object(Mockery_3_App_Http_Controllers_ExportacionController), 'index')
   │ #3 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1030): Illuminate\Routing\Route->controllerMiddleware()
   │ #4 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(810): Illuminate\Routing\Route->gatherMiddleware()
   │ #5 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(792): Illuminate\Routing\Router->gatherRouteMiddleware(Object(Illuminate\Routing\Route))
   │ #6 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(776): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
   │ #7 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(740): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
   │ #8 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(729): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
   │ #9 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(190): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
   │ #10 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(141): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
   │ #11 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #12 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #13 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #14 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #15 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #16 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #17 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #18 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #19 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #20 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #21 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(49): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #22 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #23 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(39): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #24 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #25 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(116): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #26 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(165): Illuminate\Pipeline\Pipeline->then(Object(Closure))
   │ #27 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(134): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
   │ #28 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(557): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
   │ #29 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(324): Illuminate\Foundation\Testing\TestCase->call('GET', 'http://localhos...', Array, Array, Array, Array)
   │ #30 D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php(86): Illuminate\Foundation\Testing\TestCase->get('http://localhos...')
   │ #31 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1617): Tests\Feature\ExportacionControllerTest->usuario_puede_ver_pagina_exportacion_si_tiene_permiso()
   │ #32 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1223): PHPUnit\Framework\TestCase->runTest()
   │ #33 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestResult.php(729): PHPUnit\Framework\TestCase->runBare()
   │ #34 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(973): PHPUnit\Framework\TestResult->run(Object(Tests\Feature\ExportacionControllerTest))
   │ #35 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestCase->run(Object(PHPUnit\Framework\TestResult))
   │ #36 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #37 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #38 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(651): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #39 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\Command.php(146): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\Framework\TestSuite), Array, Array, false)
   │ #40 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php(119): PHPUnit\TextUI\Command->run(Array, false)
   │ #41 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(62): Pest\Console\Command->run(Array)
   │ #42 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(63): {closure}()
   │ #43 {main}
   │
   │ ----------------------------------------------------------------------------------
   │
   │ Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Testing\TestResponse.php:123
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:88
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Usuario sin permiso no puede ver pagina exportacion
   │
   │ Failed asserting that exception of type "Mockery\Exception\BadMethodCallException" matches expected exception "Illuminate\Auth\Access\AuthorizationException". Message was: "Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified" at
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php:77
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php:1099
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php:1030
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:810
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:792
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:776
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:740
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:729
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php:190
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:141
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php:21
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php:31
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php:21
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php:40
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php:27
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php:86
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php:49
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php:39
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:116
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php:165
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php:134
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php:557
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php:324
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:115
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │ .
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Puede exportar clientes a csv
   │
   │ Expected response status code [200] but received 500.
   │ Failed asserting that 200 is identical to 500.
   │
   │ The following exception occurred during the last request:
   │
   │ Mockery\Exception\BadMethodCallException: Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified in D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code:973
   │ Stack trace:
   │ #0 D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code(1079): Mockery_3_App_Http_Controllers_ExportacionController->_mockery_handleMethodCall('getMiddleware', Array)
   │ #1 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(77): Mockery_3_App_Http_Controllers_ExportacionController->getMiddleware()
   │ #2 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1099): Illuminate\Routing\ControllerDispatcher->getMiddleware(Object(Mockery_3_App_Http_Controllers_ExportacionController), 'exportar')
   │ #3 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1030): Illuminate\Routing\Route->controllerMiddleware()
   │ #4 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(810): Illuminate\Routing\Route->gatherMiddleware()
   │ #5 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(792): Illuminate\Routing\Router->gatherRouteMiddleware(Object(Illuminate\Routing\Route))
   │ #6 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(776): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
   │ #7 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(740): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
   │ #8 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(729): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
   │ #9 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(190): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
   │ #10 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(141): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
   │ #11 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #12 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #13 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #14 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #15 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #16 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #17 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #18 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #19 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #20 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #21 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(49): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #22 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #23 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(39): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #24 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #25 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(116): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #26 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(165): Illuminate\Pipeline\Pipeline->then(Object(Closure))
   │ #27 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(134): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
   │ #28 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(557): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
   │ #29 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(352): Illuminate\Foundation\Testing\TestCase->call('POST', 'http://localhos...', Array, Array, Array, Array)
   │ #30 D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php(142): Illuminate\Foundation\Testing\TestCase->post('http://localhos...', Array)
   │ #31 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1617): Tests\Feature\ExportacionControllerTest->puede_exportar_clientes_a_csv()
   │ #32 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1223): PHPUnit\Framework\TestCase->runTest()
   │ #33 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestResult.php(729): PHPUnit\Framework\TestCase->runBare()
   │ #34 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(973): PHPUnit\Framework\TestResult->run(Object(Tests\Feature\ExportacionControllerTest))
   │ #35 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestCase->run(Object(PHPUnit\Framework\TestResult))
   │ #36 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #37 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #38 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(651): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #39 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\Command.php(146): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\Framework\TestSuite), Array, Array, false)
   │ #40 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php(119): PHPUnit\TextUI\Command->run(Array, false)
   │ #41 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(62): Pest\Console\Command->run(Array)
   │ #42 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(63): {closure}()
   │ #43 {main}
   │
   │ ----------------------------------------------------------------------------------
   │
   │ Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Testing\TestResponse.php:123
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:146
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Puede exportar productos a excel
   │
   │ Expected response status code [200] but received 500.
   │ Failed asserting that 200 is identical to 500.
   │
   │ The following exception occurred during the last request:
   │
   │ Mockery\Exception\BadMethodCallException: Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified in D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code:973
   │ Stack trace:
   │ #0 D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code(1079): Mockery_3_App_Http_Controllers_ExportacionController->_mockery_handleMethodCall('getMiddleware', Array)
   │ #1 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(77): Mockery_3_App_Http_Controllers_ExportacionController->getMiddleware()
   │ #2 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1099): Illuminate\Routing\ControllerDispatcher->getMiddleware(Object(Mockery_3_App_Http_Controllers_ExportacionController), 'exportar')
   │ #3 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1030): Illuminate\Routing\Route->controllerMiddleware()
   │ #4 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(810): Illuminate\Routing\Route->gatherMiddleware()
   │ #5 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(792): Illuminate\Routing\Router->gatherRouteMiddleware(Object(Illuminate\Routing\Route))
   │ #6 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(776): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
   │ #7 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(740): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
   │ #8 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(729): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
   │ #9 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(190): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
   │ #10 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(141): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
   │ #11 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #12 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #13 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #14 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #15 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #16 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #17 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #18 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #19 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #20 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #21 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(49): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #22 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #23 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(39): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #24 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #25 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(116): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #26 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(165): Illuminate\Pipeline\Pipeline->then(Object(Closure))
   │ #27 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(134): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
   │ #28 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(557): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
   │ #29 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(352): Illuminate\Foundation\Testing\TestCase->call('POST', 'http://localhos...', Array, Array, Array, Array)
   │ #30 D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php(166): Illuminate\Foundation\Testing\TestCase->post('http://localhos...', Array)
   │ #31 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1617): Tests\Feature\ExportacionControllerTest->puede_exportar_productos_a_excel()
   │ #32 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1223): PHPUnit\Framework\TestCase->runTest()
   │ #33 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestResult.php(729): PHPUnit\Framework\TestCase->runBare()
   │ #34 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(973): PHPUnit\Framework\TestResult->run(Object(Tests\Feature\ExportacionControllerTest))
   │ #35 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestCase->run(Object(PHPUnit\Framework\TestResult))
   │ #36 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #37 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #38 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(651): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #39 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\Command.php(146): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\Framework\TestSuite), Array, Array, false)
   │ #40 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php(119): PHPUnit\TextUI\Command->run(Array, false)
   │ #41 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(62): Pest\Console\Command->run(Array)
   │ #42 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(63): {closure}()
   │ #43 {main}
   │
   │ ----------------------------------------------------------------------------------
   │
   │ Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Testing\TestResponse.php:123
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:170
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✔ Validacion funciona para exportacion

Exportacion Simple (Tests\Feature\ExportacionSimple)
 ✔ Un usuario con permisos puede acceder a la pagina de exportacion
 ✔ Verifica permiso exportacion datos existe

Permiso (Tests\Feature\Permiso)
 ✔ Verifica permisos de admin
 ✔ Verifica permisos de vendedor
 ✔ Middleware verifica permiso

Rol (Tests\Feature\Rol)
 ✔ Admin puede ver lista de roles
 ✔ Usuario sin permiso no puede ver roles
 ✔ Admin puede crear rol

User Controller (Tests\Feature\UserController)
 ✔ Un admin puede ver la lista de usuarios
 ✘ Un admin puede crear un usuario
   │
   │ Failed asserting that a row in the table [users] matches the attributes {
   │     "email": "nuevo@test.com"
   │ }.
   │
   │ Found: [
   │     {
   │         "email": "admin@test.com"
   │     }
   │ ].
   │
   │ The following errors occurred during the last request:
   │
   │ The estado field is required.
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\InteractsWithDatabase.php:30
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\UserControllerTest.php:71
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✔ Un admin puede actualizar un usuario
 ✔ Un admin puede gestionar permisos individuales

User (Tests\Feature\User)
 ✔ Admin puede ver lista de usuarios
 ✘ Admin puede crear usuario
   │
   │ Failed asserting that a row in the table [users] matches the attributes {
   │     "name": "Nuevo Vendedor",
   │     "email": "vendedor@test.com",
   │     "rol_id": 30
   │ }.
   │
   │ Found: [
   │     {
   │         "name": "Admin Test",
   │         "email": "admin@test.com",
   │         "rol_id": 29
   │     }
   │ ].
   │
   │ The following errors occurred during the last request:
   │
   │ The estado field is required.
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\InteractsWithDatabase.php:30
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\UserTest.php:105
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Usuario sin permiso no puede ver usuarios
   │
   │ Illuminate\Database\QueryException: SQLSTATE[23505]: Unique violation: 7 ERROR:  llave duplicada viola restricción de unicidad «roles_nombre_unique»
   │ DETAIL:  Ya existe la llave (nombre)=(vendedor). (SQL: insert into "roles" ("nombre", "descripcion", "updated_at", "created_at") values (vendedor, Vendedor, 2025-05-23 04:53:09, 2025-05-23 04:53:09) returning "id")
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:760
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:720
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:422
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:392
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Query\Processors\PostgresProcessor.php:24
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Query\Builder.php:3322
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php:1869
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:1330
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:1295
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:1138
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php:986
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Support\helpers.php:319
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php:987
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Support\Traits\ForwardsCalls.php:23
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:2330
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:2342
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\UserTest.php:122
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

Authentication (P\Tests\Feature\Auth\Authentication)
 ✔ Login screen can be rendered
 ✔ Users can authenticate using the login screen
 ✔ Users can not authenticate with invalid password

Time: 00:22.799, Memory: 58.00 MB

Summary of non-successful tests:

Exportacion Controller (Tests\Feature\ExportacionController)
 ✘ Usuario puede ver pagina exportacion si tiene permiso
   │
   │ Expected response status code [200] but received 500.
   │ Failed asserting that 200 is identical to 500.
   │
   │ The following exception occurred during the last request:
   │
   │ Mockery\Exception\BadMethodCallException: Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified in D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code:973
   │ Stack trace:
   │ #0 D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code(1079): Mockery_3_App_Http_Controllers_ExportacionController->_mockery_handleMethodCall('getMiddleware', Array)
   │ #1 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(77): Mockery_3_App_Http_Controllers_ExportacionController->getMiddleware()
   │ #2 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1099): Illuminate\Routing\ControllerDispatcher->getMiddleware(Object(Mockery_3_App_Http_Controllers_ExportacionController), 'index')
   │ #3 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1030): Illuminate\Routing\Route->controllerMiddleware()
   │ #4 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(810): Illuminate\Routing\Route->gatherMiddleware()
   │ #5 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(792): Illuminate\Routing\Router->gatherRouteMiddleware(Object(Illuminate\Routing\Route))
   │ #6 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(776): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
   │ #7 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(740): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
   │ #8 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(729): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
   │ #9 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(190): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
   │ #10 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(141): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
   │ #11 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #12 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #13 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #14 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #15 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #16 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #17 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #18 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #19 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #20 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #21 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(49): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #22 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #23 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(39): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #24 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #25 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(116): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #26 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(165): Illuminate\Pipeline\Pipeline->then(Object(Closure))
   │ #27 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(134): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
   │ #28 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(557): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
   │ #29 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(324): Illuminate\Foundation\Testing\TestCase->call('GET', 'http://localhos...', Array, Array, Array, Array)
   │ #30 D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php(86): Illuminate\Foundation\Testing\TestCase->get('http://localhos...')
   │ #31 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1617): Tests\Feature\ExportacionControllerTest->usuario_puede_ver_pagina_exportacion_si_tiene_permiso()
   │ #32 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1223): PHPUnit\Framework\TestCase->runTest()
   │ #33 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestResult.php(729): PHPUnit\Framework\TestCase->runBare()
   │ #34 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(973): PHPUnit\Framework\TestResult->run(Object(Tests\Feature\ExportacionControllerTest))
   │ #35 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestCase->run(Object(PHPUnit\Framework\TestResult))
   │ #36 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #37 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #38 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(651): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #39 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\Command.php(146): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\Framework\TestSuite), Array, Array, false)
   │ #40 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php(119): PHPUnit\TextUI\Command->run(Array, false)
   │ #41 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(62): Pest\Console\Command->run(Array)
   │ #42 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(63): {closure}()
   │ #43 {main}
   │
   │ ----------------------------------------------------------------------------------
   │
   │ Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Testing\TestResponse.php:123
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:88
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Usuario sin permiso no puede ver pagina exportacion
   │
   │ Failed asserting that exception of type "Mockery\Exception\BadMethodCallException" matches expected exception "Illuminate\Auth\Access\AuthorizationException". Message was: "Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified" at
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php:77
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php:1099
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php:1030
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:810
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:792
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:776
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:740
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php:729
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php:190
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:141
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php:21
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php:31
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php:21
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php:40
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php:27
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php:86
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php:49
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php:39
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:180
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php:116
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php:165
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php:134
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php:557
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php:324
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:115
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │ .
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Puede exportar clientes a csv
   │
   │ Expected response status code [200] but received 500.
   │ Failed asserting that 200 is identical to 500.
   │
   │ The following exception occurred during the last request:
   │
   │ Mockery\Exception\BadMethodCallException: Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified in D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code:973
   │ Stack trace:
   │ #0 D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code(1079): Mockery_3_App_Http_Controllers_ExportacionController->_mockery_handleMethodCall('getMiddleware', Array)
   │ #1 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(77): Mockery_3_App_Http_Controllers_ExportacionController->getMiddleware()
   │ #2 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1099): Illuminate\Routing\ControllerDispatcher->getMiddleware(Object(Mockery_3_App_Http_Controllers_ExportacionController), 'exportar')
   │ #3 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1030): Illuminate\Routing\Route->controllerMiddleware()
   │ #4 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(810): Illuminate\Routing\Route->gatherMiddleware()
   │ #5 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(792): Illuminate\Routing\Router->gatherRouteMiddleware(Object(Illuminate\Routing\Route))
   │ #6 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(776): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
   │ #7 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(740): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
   │ #8 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(729): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
   │ #9 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(190): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
   │ #10 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(141): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
   │ #11 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #12 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #13 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #14 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #15 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #16 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #17 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #18 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #19 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #20 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #21 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(49): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #22 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #23 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(39): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #24 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #25 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(116): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #26 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(165): Illuminate\Pipeline\Pipeline->then(Object(Closure))
   │ #27 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(134): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
   │ #28 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(557): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
   │ #29 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(352): Illuminate\Foundation\Testing\TestCase->call('POST', 'http://localhos...', Array, Array, Array, Array)
   │ #30 D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php(142): Illuminate\Foundation\Testing\TestCase->post('http://localhos...', Array)
   │ #31 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1617): Tests\Feature\ExportacionControllerTest->puede_exportar_clientes_a_csv()
   │ #32 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1223): PHPUnit\Framework\TestCase->runTest()
   │ #33 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestResult.php(729): PHPUnit\Framework\TestCase->runBare()
   │ #34 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(973): PHPUnit\Framework\TestResult->run(Object(Tests\Feature\ExportacionControllerTest))
   │ #35 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestCase->run(Object(PHPUnit\Framework\TestResult))
   │ #36 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #37 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #38 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(651): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #39 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\Command.php(146): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\Framework\TestSuite), Array, Array, false)
   │ #40 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php(119): PHPUnit\TextUI\Command->run(Array, false)
   │ #41 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(62): Pest\Console\Command->run(Array)
   │ #42 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(63): {closure}()
   │ #43 {main}
   │
   │ ----------------------------------------------------------------------------------
   │
   │ Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Testing\TestResponse.php:123
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:146
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Puede exportar productos a excel
   │
   │ Expected response status code [200] but received 500.
   │ Failed asserting that 200 is identical to 500.
   │
   │ The following exception occurred during the last request:
   │
   │ Mockery\Exception\BadMethodCallException: Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified in D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code:973
   │ Stack trace:
   │ #0 D:\Conocimientos Programacion\ventaplus\vendor\mockery\mockery\library\Mockery\Loader\EvalLoader.php(30) : eval()'d code(1079): Mockery_3_App_Http_Controllers_ExportacionController->_mockery_handleMethodCall('getMiddleware', Array)
   │ #1 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\ControllerDispatcher.php(77): Mockery_3_App_Http_Controllers_ExportacionController->getMiddleware()
   │ #2 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1099): Illuminate\Routing\ControllerDispatcher->getMiddleware(Object(Mockery_3_App_Http_Controllers_ExportacionController), 'exportar')
   │ #3 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Route.php(1030): Illuminate\Routing\Route->controllerMiddleware()
   │ #4 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(810): Illuminate\Routing\Route->gatherMiddleware()
   │ #5 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(792): Illuminate\Routing\Router->gatherRouteMiddleware(Object(Illuminate\Routing\Route))
   │ #6 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(776): Illuminate\Routing\Router->runRouteWithinStack(Object(Illuminate\Routing\Route), Object(Illuminate\Http\Request))
   │ #7 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(740): Illuminate\Routing\Router->runRoute(Object(Illuminate\Http\Request), Object(Illuminate\Routing\Route))
   │ #8 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Routing\Router.php(729): Illuminate\Routing\Router->dispatchToRoute(Object(Illuminate\Http\Request))
   │ #9 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(190): Illuminate\Routing\Router->dispatch(Object(Illuminate\Http\Request))
   │ #10 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(141): Illuminate\Foundation\Http\Kernel->Illuminate\Foundation\Http\{closure}(Object(Illuminate\Http\Request))
   │ #11 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #12 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull.php(31): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #13 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ConvertEmptyStringsToNull->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #14 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TransformsRequest.php(21): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #15 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\TrimStrings.php(40): Illuminate\Foundation\Http\Middleware\TransformsRequest->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #16 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\TrimStrings->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #17 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\ValidatePostSize.php(27): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #18 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\ValidatePostSize->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #19 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance.php(86): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #20 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Foundation\Http\Middleware\PreventRequestsDuringMaintenance->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #21 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\HandleCors.php(49): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #22 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\HandleCors->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #23 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Http\Middleware\TrustProxies.php(39): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #24 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(180): Illuminate\Http\Middleware\TrustProxies->handle(Object(Illuminate\Http\Request), Object(Closure))
   │ #25 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Pipeline\Pipeline.php(116): Illuminate\Pipeline\Pipeline->Illuminate\Pipeline\{closure}(Object(Illuminate\Http\Request))
   │ #26 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(165): Illuminate\Pipeline\Pipeline->then(Object(Closure))
   │ #27 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Http\Kernel.php(134): Illuminate\Foundation\Http\Kernel->sendRequestThroughRouter(Object(Illuminate\Http\Request))
   │ #28 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(557): Illuminate\Foundation\Http\Kernel->handle(Object(Illuminate\Http\Request))
   │ #29 D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\MakesHttpRequests.php(352): Illuminate\Foundation\Testing\TestCase->call('POST', 'http://localhos...', Array, Array, Array, Array)
   │ #30 D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php(166): Illuminate\Foundation\Testing\TestCase->post('http://localhos...', Array)
   │ #31 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1617): Tests\Feature\ExportacionControllerTest->puede_exportar_productos_a_excel()
   │ #32 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(1223): PHPUnit\Framework\TestCase->runTest()
   │ #33 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestResult.php(729): PHPUnit\Framework\TestCase->runBare()
   │ #34 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestCase.php(973): PHPUnit\Framework\TestResult->run(Object(Tests\Feature\ExportacionControllerTest))
   │ #35 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestCase->run(Object(PHPUnit\Framework\TestResult))
   │ #36 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #37 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\Framework\TestSuite.php(685): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #38 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\TestRunner.php(651): PHPUnit\Framework\TestSuite->run(Object(PHPUnit\Framework\TestResult))
   │ #39 D:\Conocimientos Programacion\ventaplus\vendor\phpunit\phpunit\src\TextUI\Command.php(146): PHPUnit\TextUI\TestRunner->run(Object(PHPUnit\Framework\TestSuite), Array, Array, false)
   │ #40 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php(119): PHPUnit\TextUI\Command->run(Array, false)
   │ #41 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(62): Pest\Console\Command->run(Array)
   │ #42 D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\bin\pest(63): {closure}()
   │ #43 {main}
   │
   │ ----------------------------------------------------------------------------------
   │
   │ Received Mockery_3_App_Http_Controllers_ExportacionController::getMiddleware(), but no expectations were specified
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Testing\TestResponse.php:123
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\ExportacionControllerTest.php:170
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

User Controller (Tests\Feature\UserController)
 ✘ Un admin puede crear un usuario
   │
   │ Failed asserting that a row in the table [users] matches the attributes {
   │     "email": "nuevo@test.com"
   │ }.
   │
   │ Found: [
   │     {
   │         "email": "admin@test.com"
   │     }
   │ ].
   │
   │ The following errors occurred during the last request:
   │
   │ The estado field is required.
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\InteractsWithDatabase.php:30
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\UserControllerTest.php:71
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

User (Tests\Feature\User)
 ✘ Admin puede crear usuario
   │
   │ Failed asserting that a row in the table [users] matches the attributes {
   │     "name": "Nuevo Vendedor",
   │     "email": "vendedor@test.com",
   │     "rol_id": 30
   │ }.
   │
   │ Found: [
   │     {
   │         "name": "Admin Test",
   │         "email": "admin@test.com",
   │         "rol_id": 29
   │     }
   │ ].
   │
   │ The following errors occurred during the last request:
   │
   │ The estado field is required.
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Foundation\Testing\Concerns\InteractsWithDatabase.php:30
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\UserTest.php:105
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

 ✘ Usuario sin permiso no puede ver usuarios
   │
   │ Illuminate\Database\QueryException: SQLSTATE[23505]: Unique violation: 7 ERROR:  llave duplicada viola restricción de unicidad «roles_nombre_unique»
   │ DETAIL:  Ya existe la llave (nombre)=(vendedor). (SQL: insert into "roles" ("nombre", "descripcion", "updated_at", "created_at") values (vendedor, Vendedor, 2025-05-23 04:53:09, 2025-05-23 04:53:09) returning "id")
   │
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:760
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:720
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:422
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Connection.php:392
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Query\Processors\PostgresProcessor.php:24
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Query\Builder.php:3322
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php:1869
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:1330
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:1295
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:1138
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php:986
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Support\helpers.php:319
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Builder.php:987
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Support\Traits\ForwardsCalls.php:23
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:2330
   │ D:\Conocimientos Programacion\ventaplus\vendor\laravel\framework\src\Illuminate\Database\Eloquent\Model.php:2342
   │ D:\Conocimientos Programacion\ventaplus\tests\Feature\UserTest.php:122
   │ D:\Conocimientos Programacion\ventaplus\vendor\pestphp\pest\src\Console\Command.php:119
   │

ERRORS!
Tests: 38, Assertions: 102, Errors: 1, Failures: 6.

